class PhoneField{constructor(e,t="+48 ___-___-___",s="_"){this.handler=e,this.mask=t,this.placeholder=s,this.setLength(),this.setValue(),this.start=this.placeHolderPosition()-1,this.handler.addEventListener("focusin",()=>{this.focused()}),this.handler.addEventListener("keydown",e=>{this.input(e)})}focused(){let e=this.placeHolderPosition();this.handler.selectionStart=e,this.handler.selectionEnd=e}input(e){if(this.isDirectionKey(e.key)||e.preventDefault(),this.isNum(e.key))this.changeChar(e.key);else if(this.isDeletionKey(e.key))if("Backspace"===e.key){let e=this.start;this.changeChar(this.placeholder,-1,e)}else this.changeChar(this.placeholder)}setLength(){this.handler.maxLength=this.mask.length}setValue(){this.handler.value=this.mask}isNum(e){return!isNaN(e)&&parseInt(+e)==e&&!isNaN(parseInt(e,10))}isDeletionKey(e){return"Delete"===e||"Backspace"===e}isDirectionKey(e){return"ArrowUp"===e||"ArrowDown"===e||"ArrowRight"===e||"ArrowLeft"===e||"Tab"===e}isPlaceholder(e){return e==this.placeholder}placeHolderPosition(){return this.handler.value.indexOf(this.placeholder)}changeChar(e,t=1,s=this.mask.length){let i,h=this.handler.value;i=0<t?this.handler.selectionStart:this.handler.selectionStart-1;let n="";if(i===s)return!1;if(!this.isNum(h[i])&&!this.isPlaceholder(h[i]))do{if(i+=t,i===s)return!1}while(!this.isNum(h[i])&&!this.isPlaceholder(h[i]));n=this.replaceAt(h,i,e),this.handler.value=n,0<t&&(i+=t),this.handler.selectionStart=i,this.handler.selectionEnd=i}replaceAt(e,t,s){return e.substring(0,t)+s+e.substring(++t)}}document.addEventListener("DOMContentLoaded",function(){"use strict";let e=document.getElementsByClassName("masked-phone"),t=[];for(let s=0;s<e.length;s++)t.push(new PhoneField(e[s],e[s].dataset.phonemask,e[s].dataset.placeholder))});